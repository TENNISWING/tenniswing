<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/host/host-layout}">
<head>
<style>
	body{
		background-color: #f5f5f5;
	}
	*{
		font-family: 'Noto Sans KR', sans-serif !important;
	}
	.shop-btn-primary:hover{
		background-color: #3C3C3C;
		color: white;
		border: 1px solid #3C3C3C;
	}
	.pagination.pagination-primary .page-item.active .page-link {
	    background-color: #3C3C3C;
	    border-color: #3C3C3C;
	    box-shadow: 0 2px 5px rgba(67, 94, 190, 0.3);
	}
</style>
</head>
<th:block layout:fragment="hostcontent">
	<div class="page-content">
		<!-- Main__container Start-->
		<div class="main__container">
			<!-- Main Inner Wrapper Start -->
			<div class="main__inner--wrapper" style="padding: 0;">
					<!-- Product List Start -->
				<div class="row">
					<div class="col-12">
						
	
					<!-- Basic Tables start -->
					<div class="dashboard__header">
						<div class="d__header--left">
							<div class="section-title" style="margin: 0; padding: 0">
								<h2 style="color: #3C3C3C; font-size: 30px;">코트 리스트</h2>
							</div>
						</div>
						<div class="add__btn" style="margin-right: 1.5rem">
							<a href="hostregisterCourtroom" class="shop-btn shop-btn-primary"><i
								class="fas fa-plus"></i>코트 등록하기</a>
						</div>
					<!-- 	<div style="float: right">
							<button class="btn btn-primary"
								th:onclick="|location.href='@{/hostregisterCourtroom}'|">코트
								등록하기</button>
						</div> -->
					</div>
					<section class="section">
						<div class="card" style="height: 1200px;">
	
							<div class="card-body">
								<div class="table-responsive">
									<table class="table" id="table1">
										<thead>
											<tr>
												<th>코트장 번호</th>
												<th>코트명</th>
												<th>위치</th>
												<th>운영시간</th>
												<th>코트 갯수</th>
												<th>등록일</th>
												<th>허가여부</th>
												<th>설정</th>
											</tr>
										</thead>
										<tbody>
											<th:block th:each="courtList, stat : ${courtList}">
												<tr style="text-align: left;">
													<td id="crtroomNo" th:attrappend="id=${courtList.crtroomNo}">[[
                            ${courtList.crtroomNo} ]]</td>
                          <td>[[ ${courtList.crtroomName} ]]</td>
                          <td>[[ ${courtList.crtroomLocation} ]]</td>
                          <td>[[ ${courtList.crtroomOperateStartTime} ]] ~ [[
                            ${courtList.crtroomOperateEndTime} ]]</td>
                          <td>[[ ${courtList.crtCount} ]]</td>
                          <td>[[
                            ${#dates.format(courtList.crtroomRegiDate,'yyyy년MM월dd일')}
                            ]]</td>
                          <td><span class="badge bg-success" style="background: transparent !important; border: 1px solid #fbd5ce !important; color: #eb5e28 !important">[[${courtList.crtroomStateName}]]</span></td>
                          <td>
                            <div
                              th:onclick="|location.href='@{/hostCourtDetail(crtroomNo=${courtList.crtroomNo})}'|"
                              class="btn icon btn-primary" style="background-color: white; border:1px solid rgb(102, 112, 133); padding: 7px;">
                              <svg width="20"
									height="20" viewBox="0 0 20 20" fill="none"
									xmlns="http://www.w3.org/2000/svg">
                                  <g clip-path="url(#)">
                                  <path
									d="M0.833984 10C0.833984 10 4.16732 3.33334 10.0007 3.33334C15.834 3.33334 19.1673 10 19.1673 10C19.1673 10 15.834 16.6667 10.0007 16.6667C4.16732 16.6667 0.833984 10 0.833984 10Z"
									stroke="#667085" stroke-width="2"
									stroke-linecap="round" stroke-linejoin="round" />
                                  <path
									d="M10 12.5C11.3807 12.5 12.5 11.3807 12.5 10C12.5 8.61929 11.3807 7.5 10 7.5C8.61929 7.5 7.5 8.61929 7.5 10C7.5 11.3807 8.61929 12.5 10 12.5Z"
									stroke="#667085" stroke-width="2"
									stroke-linecap="round" stroke-linejoin="round" />
                                  </g>
                                  <defs>
                                      <clipPath>
                                          <rectwidth="20" height="20" fill="white" />
                                      </clipPath>
                                  </defs>
                              </svg>
                              <!-- <i class="icon dripicons dripicons-enter"></i> -->
                            </div>
                            <div class="btn icon btn-success edit" style="background-color: white; border:1px solid rgb(102, 112, 133); padding: 7px"
                              th:onclick="|location.href='@{/hosteditCourtroom(crtroomNo=${courtList.crtroomNo})}'|"
                              id="courtroomEdit" th:attrappend="id=${stat.index}">
                              <svg width="20" height="20" viewBox="0 0 20 20"
								fill="none" xmlns="http://www.w3.org/2000/svg">
                               <path
								d="M14.166 2.49999C14.3849 2.28112 14.6447 2.1075 14.9307 1.98905C15.2167 1.8706 15.5232 1.80963 15.8327 1.80963C16.1422 1.80963 16.4487 1.8706 16.7347 1.98905C17.0206 2.1075 17.2805 2.28112 17.4993 2.49999C17.7182 2.71886 17.8918 2.97869 18.0103 3.26466C18.1287 3.55063 18.1897 3.85713 18.1897 4.16665C18.1897 4.47618 18.1287 4.78268 18.0103 5.06865C17.8918 5.35461 17.7182 5.61445 17.4993 5.83332L6.24935 17.0833L1.66602 18.3333L2.91602 13.75L14.166 2.49999Z"
								stroke="#667085" stroke-width="1.66667"
								stroke-linecap="round" stroke-linejoin="round" />
                              </svg>
                              <!-- <i class="icon dripicons dripicons-pencil"></i> -->
                            </div>
                            <div class="btn icon btn-danger courtroom" style="background-color: white; border:1px solid rgb(102, 112, 133); padding: 7px"
                              id="courtroomDelete" th:attrappend="id=${courtList.crtroomNo}">
                              	<svg width="18" height="20" viewBox="0 0 18 20"
									fill="none" xmlns="http://www.w3.org/2000/svg">
                                 <path
										d="M1.5 5.00001H3.16667M3.16667 5.00001H16.5M3.16667 5.00001V16.6667C3.16667 17.1087 3.34226 17.5326 3.65482 17.8452C3.96738 18.1577 4.39131 18.3333 4.83333 18.3333H13.1667C13.6087 18.3333 14.0326 18.1577 14.3452 17.8452C14.6577 17.5326 14.8333 17.1087 14.8333 16.6667V5.00001H3.16667ZM5.66667 5.00001V3.33334C5.66667 2.89131 5.84226 2.46739 6.15482 2.15483C6.46738 1.84227 6.89131 1.66667 7.33333 1.66667H10.6667C11.1087 1.66667 11.5326 1.84227 11.8452 2.15483C12.1577 2.46739 12.3333 2.89131 12.3333 3.33334V5.00001M7.33333 9.16667V14.1667M10.6667 9.16667V14.1667"
										stroke="#667085" stroke-width="1.66667"
										stroke-linecap="round" stroke-linejoin="round"/>
                                 </svg>
                              <!-- <i class="icon dripicons dripicons-trash" id="courtroomDelete" th:attrappend="id=${courtList.crtroomNo}"></i> -->
                            </div>
                          </td>
												</tr>
												<!-- Vertically Centered modal Modal -->
												<!-- <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
						                aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
						                <div class="modal-dialog modal-dialog-centered modal-dialog-centered modal-dialog-scrollable"
						                    role="document">
						                    <div class="modal-content">
						                        <div class="modal-header">
						                            <h5 class="modal-title" id="exampleModalCenterTitle">Vertically Centered
						                            </h5>
						                            <button type="button" class="close" data-bs-dismiss="modal"
						                                aria-label="Close">
						                                <i data-feather="x"></i>
						                            </button>
						                        </div>
						                        <div class="modal-body">
						                            <button class="btn icon icon-left btn-primary"
						                            th:onclick="|location.href='@{/editCourtroom(crtroomNo=${courtList.crtroomNo})}'|">
						                            	<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" 
						                            	fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" 
						                            	class="feather feather-edit">
							                            	<path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
							                            	<path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
						                            	</svg> 코트장 수정
						                            </button>
						                        </div>
						                        <div class="modal-footer">
						                            <button type="button" class="btn btn-light-secondary"
						                                data-bs-dismiss="modal">
						                                <i class="bx bx-x d-block d-sm-none"></i>
						                                <span class="d-none d-sm-block">Close</span>
						                            </button>
						                        </div>
						                    </div>
						                </div>
						            </div> -->
												</th:block>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</section>
					</div>
				</div>
			</div>
		</div>
		<!-- Basic Tables end -->
	</div>
	<script th:inline="javascript">
	$('.courtroom').on('click',function(e){
		
		Swal.fire({
			  title: "",
			  text: "정말 삭제하시겠습니까?",
			  icon: "warning",
			  showCancelButton: true,
			  confirmButtonColor: "#3085d6",
			  cancelButtonColor: "#d33",
			  confirmButtonText: "Yes, delete it!"
			}).then((result) => {
			  if (result.isConfirmed) {
			    console.log($(e.target));
				let cnt = $(e.target).prop("id").replace("courtroomDelete","");
				console.log(cnt);
				let courtroomNo = Number($('#crtroomNo'+cnt).text());
				$.ajax({
					type: 'POST',
					url: 'hostdeleteCourtroom',
					data: {crtNo: courtroomNo},
					dataType: 'json',
					success: function(result){
						if(result.result){
							Swal.fire({
								  icon: "success",
								  title: "",
								  text: "정상적으로 삭제되었습니다.",
								}).then(function(){
									location.reload();
								})
						}else{
							Swal.fire({
								  icon: "error",
								  title: "",
								  html: "정상적으로 삭제되지 않았습니다."+" 예약 건수: "+result.reserveCount+"건",
							})
						}
					}
				})
		  	}
		});
	})
		/* let msg = [[${result}]]
		if(msg != null) alert(msg); */
	</script>

</th:block>
</html>