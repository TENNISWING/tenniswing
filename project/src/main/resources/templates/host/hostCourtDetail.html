<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/host/host-layout}">
<head>
<style>
body {
	background-color: #f5f5f5;
}
*{
	font-family: 'Noto Sans KR', sans-serif !important;
}
.shop-btn-primary:hover{
	background-color: #3C3C3C;
	color: white;
	border: 1px solid #3C3C3C;
}
.pagination.pagination-primary .page-item.active .page-link {
    background-color: #3C3C3C;
    border-color: #3C3C3C;
    box-shadow: 0 2px 5px rgba(67, 94, 190, 0.3);
}
#calendar {
	max-width: 1100px;
	margin: 0 auto;
}

/*요일*/
.fc-col-header-cell-cushion {
	color: #000;
}

.fc-col-header-cell-cushion:hover {
	text-decoration: none;
	color: #000;
}
/*일자*/
.fc-daygrid-day-number {
	color: #000;
	font-size: 1em;
}

/*more버튼*/
.fc-daygrid-more-link.fc-more-link {
	color: #000;
}
/*일정시간*/
.fc-daygrid-event>.fc-event-time {
	color: #000;
}
/*시간제목*/
.fc-daygrid-dot-event>.fc-event-title {
	color: #000 !important;
}
/*month/week/day*/
.fc-button-active {
	border-color: #ffc107 !important;
	background-color: #ffc107 !important;
	color: #000 !important;
	font-weight: bold !important;
}
/*노란버튼*/
.btn-warning {
	font-weight: bold;
}
</style>
</head>
<th:block layout:fragment="hostcontent">
<script src='/assets/fullcalendar/dist/index.global.js'></script>

	<div class="page-content">
		<!-- Main__container Start-->
		<div class="main__container">
			<!-- Main Inner Wrapper Start -->
			<div class="main__inner--wrapper" style="padding: 0;">
				<!-- Basic Tables start -->
				<div class="row">
					<div class="col-12">
						<div class="dashboard__header">
							<div class="d__header--left">
								<div class="section-title" style="margin: 0; padding: 0">
									<h2 style="color: #3C3C3C; font-size: 30px;">코트 상세 정보</h2>
								</div>
							</div>
						</div>
						<!-- <div class="card-header" style="overflow: hidden">
							<div class="page-heading">
								<h3>코트 상세 내역</h3>
							</div>
						</div> -->
						<section class="section">
							<div class="card">
								<div class="card-body">
									<div class="container">
										<!-- 코트 사진 -->
										<div>
											<div class="card">
												<div class="card-body">
													<div id="carouselExampleCaptions" class="carousel slide"
														data-bs-ride="carousel" style="height: 400px; width: 100%;">
														<ol class="carousel-indicators">
															<th:block th:if="${courtDetail.attachList} != null">
																<th:block th:each="num, stat : ${courtDetail.attachList}">
																	<li data-bs-target="#carouselExampleCaptions"
																		th:data-bs-slide-to="${stat.index}" class="indicators"></li>
																</th:block>
															</th:block>
														</ol>
														<div class="carousel-inner" style="height: 400px; width: 100%;">
															<th:block
																th:each="courtDetail, stat : ${courtDetail.attachList}">
																<div class="carousel-item" style="height: 400px; width: 100%;">
																	<img th:src="${courtDetail.attachPath}"
																		class="d-block w-100" alt="..."
																		style="object-fit: cover; height: 400px; width: 100%;">
																	<div class="carousel-caption d-none d-md-block">
																		<h5>Second slide label</h5>
																		<p>Nulla vitae elit libero, a pharetra augue mollis
																			interdum.</p>
																	</div>
																</div>
															</th:block>
															<script th:inline="javascript">
																$('.carousel-item').eq(0).addClass('active');
																$('.indicators').eq(0).addClass('active');
															</script>
														</div>
														<a class="carousel-control-prev"
															href="#carouselExampleCaptions" role="button"
															data-bs-slide="prev"> <span
															class="carousel-control-prev-icon" aria-hidden="true"></span>
															<span class="visually-hidden">Previous</span>
														</a> <a class="carousel-control-next"
															href="#carouselExampleCaptions" role="button"
															data-bs-slide="next"> <span
															class="carousel-control-next-icon" aria-hidden="true"></span>
															<span class="visually-hidden">Next</span>
														</a>
													</div>
												</div>
											</div>
											<!-- 코트정보 -->
											<div style="display: block">
												<div class="card">
													<div class="card-content">
														<div class="card-body">
															<!-- <form class="form form-horizontal"> -->
															<div class="form-body">
																<div class="row">
																	<div class="col-md-3">
																		<label for="first-name-horizontal">코트장 번호</label>
																	</div>
																	<div class="col-md-9 form-group">
																		<input type="number" id="crtroomNo" class="form-control"
																			th:value="${param.crtroomNo}">
																	</div>
																	<div class="col-md-3">
																		<label for="first-name-horizontal">코트장 이름</label>
																	</div>
																	<div class="col-md-9 form-group">
																		<input type="text" id="crtroomName" class="form-control"
																			th:value="${courtDetail.crtroomName}" readonly>
																	</div>
																	<div class="col-md-3">
																		<label for="email-horizontal">코트장 위치</label>
																	</div>
																	<div class="col-md-9 form-group">
																		<input type="text" id="crtroomLocation"
																			class="form-control"
																			th:value="${courtDetail.crtroomLocation}" readonly>
																	</div>
																	<div class="col-md-3">
																		<label for="contact-info-horizontal">운영 시간</label>
																	</div>
																	<div class="col-md-9 form-group"
																		style="text-align: center;">
																		<!-- <input type="text" id="crtroomOperateStartTime"
																			class="form-control"
																			th:value="${courtDetail.crtroomOperateStartTime}"
																			style="width: 165px; float: left" readonly>
																		<div style="display: inline-block">~</div>
																		<input type="text" id="crtroomOperateEndTime"
																			class="form-control"
																			th:value="${courtDetail.crtroomOperateEndTime}"
																			style="width: 165px; float: right" readonly> -->
																		<textarea rows="1" class="form-control" readonly>[[${courtDetail.crtroomOperateStartTime}]] ~ [[${courtDetail.crtroomOperateEndTime}]]</textarea>
																	</div>
																	<div class="col-md-3">
																		<label for="email-horizontal">코트장 설명</label>
																	</div>
																	<div class="col-md-9 form-group">
																		<textarea id="crtroomExp" rows="3" class="form-control"
																			readonly>
																			[[ ${courtDetail.crtroomExp} ]]
																		</textarea>
																	</div>
																	<div class="col-md-3">
																		<label for="password-horizontal">주의사항</label>
																	</div>
																	<div class="col-md-9 form-group">
																		<textarea id="crtroomCaution" rows="3"
																			class="form-control" readonly>
																			[[ ${courtDetail.crtroomCaution} ]]
																		</textarea>
																	</div>
																	<div class="col-md-3">
																		<label for="password-horizontal">이용안내</label>
																	</div>
																	<div class="col-md-9 form-group">
																		<textarea id="crtroomUseGuide" rows="3"
																			class="form-control" readonly>
																			[[ ${courtDetail.crtroomUseGuide} ]]
																		</textarea>
																	</div>
																	<div class="col-md-3">
																		<label for="password-horizontal">환불안내</label>
																	</div>
																	<div class="col-md-9 form-group">
																		<ul>
																			<li>7일 전 취소시: [[${refundInf.sevenDayBefore}]]% 환불</li>
																			<li>5일 전 취소시: [[${refundInf.fiveDayBefore}]]% 환불</li>
																			<li>3일 전 취소시: [[${refundInf.threeDayBefore}]]% 환불</li>
																			<li>2일 전 ~ 당일: 환불 불가</li>
																			<li>당일 천재지변으로 인해 구장 이용이 불가한 경우
																				[[${refundInf.significant}]]% 환불</li>
																			<li>적용기준: 호우경보, 대설경보, 태풍주의보, 태풍경보</li>
																		</ul>
																	</div>
																	<div class="col-md-3">
																		<label for="password-horizontal">등록일</label>
																	</div>
																	<div class="col-md-9 form-group">
																		<input type="text" id="crtroomRegiDate"
																			class="form-control"
																			th:value="${#dates.format(courtDetail.crtroomRegiDate, 'yyyy년MM월dd일')}"
																			readonly>
																	</div>
																	<div class="col-sm-12 d-flex justify-content-end">
																		<button type="button"
																			th:onclick="|location.href='@{/hosteditCourtroom(crtroomNo=${param.crtroomNo})}'|"
																			class="btn btn-primary me-1 mb-1">코트장 수정하기</button>
																		<!-- <button type="button" th:onclick="|location.href='@{/deleteCourtroom(crtroomNo=${param.crtroomNo})}'|"
													class="btn btn-primary me-1 mb-1">코트장 삭제하기</button> -->
																		<!-- <button type="reset"
														class="btn btn-light-secondary me-1 mb-1">Reset</button> -->
																	</div>
																</div>
															</div>
															<!-- </form> -->
														</div>
													</div>
												</div>
											</div>
										</div>
										<!-- 코트 상세 내역 -->
										<div class="row product-info">
											<div class="col-12">
												<div class="tabs__wrapper tabs__wrapper--v3">
													<div class="tabs__filter">
														<ul class="nav nav-tabs" id="myTab" role="tablist">
															<li class="nav-item" role="presentation">
																<button class="nav-link" id="electronics-tab"
																	data-bs-toggle="tab" data-bs-target="#electronics-tab-pane"
																	type="button" role="tab" aria-controls="electronics-tab-pane"
																	aria-selected="false">예약현황</button>
															</li>
															<th:block
																th:each="courtDetail, stat : ${courtDetail.crtDetailList}">
																<li class="nav-item" role="presentation">
																	<button class="nav-link" id="home-tab"
																		data-bs-toggle="tab" data-bs-target="#home-tab-pane"
																		th:attrappend="data-bs-target=${courtDetail.crtDetailNo}"
																		type="button" role="tab" aria-controls="home-tab-pane"
																		aria-selected="true">[[${stat.index}+1]]코트</button>
																</li>
															</th:block>
															<!-- <li class="nav-item" role="presentation">
										<button class="nav-link" id="groceries-tab" data-bs-toggle="tab"
											data-bs-target="#groceries-tab-pane" type="button" role="tab"
											aria-controls="groceries-tab-pane" aria-selected="false">
											2코트</button>
									</li> -->
															<li class="nav-item" role="presentation">
																<button class="nav-link" id="women-tab"
																	data-bs-toggle="tab" data-bs-target="#women-tab-pane"
																	type="button" role="tab" aria-controls="women-tab-pane"
																	aria-selected="false">후기</button>
															</li>
															
														</ul>
													</div>
												</div>
												<div class="tab-content" id="myTabContent">
													<th:block
														th:each="courtDetail, stat : ${courtDetail.crtDetailList}">
														<div class="tab-pane fade" id="home-tab-pane"
															th:attrappend="id=${courtDetail.crtDetailNo}" role="tabpanel"
															aria-labelledby="home-tab" tabindex="0">
															<div class="content__body" style="padding-top: 10px;">
																<div class="col-md-6" 
																	style="display: inline-block; float: center; margin-left: 25%">
																	
																	<!-- <div style="overflow: hidden">
																		<table>
																			<thead>
																				<tr>
																					<th th:each="num : ${#numbers.sequence(1,10)}"
																						style="background-color: green; width: 50px; height: 30px; border: 3px solid #fff">
																					</th>
																					<th th:each="num1 : ${#numbers.sequence(1,6)}"
																						style="background-color: lightgreen; width: 50px; height: 30px; border: 3px solid #fff">
																					</th>
																				</tr>
																			</thead>
																			<tbody>
																				<tr>
																					<td
																						style="width: 50px; height: 30px; font-size: 10px">9시</td>
																					<td th:each="num2 : ${#numbers.sequence(1,4)}"></td>
																					<td
																						style="width: 50px; height: 30px; font-size: 10px">14시</td>
																					<td th:each="num2 : ${#numbers.sequence(1,4)}"></td>
																					<td
																						style="width: 50px; height: 30px; font-size: 10px">19시</td>
																					<td th:each="num2 : ${#numbers.sequence(1,4)}"></td>
																					<td
																						style="width: 50px; height: 30px; font-size: 10px">24시</td>
																				</tr>
																			</tbody>
																		</table>
																		<table style="float: right">
																			<tbody>
																				<tr>
																					<th
																						style="background-color: green; width: 30px; height: 10px; border: 2px solid #fff">
																					</th>
																					<td
																						style="width: 50px; height: 10px; font-size: 10px">예약불가</td>
																					<th
																						style="background-color: lightgreen; width: 30px; height: 10px; border: 2px solid #fff">
																					</th>
																					<td
																						style="width: 50px; height: 10px; font-size: 10px">예약가능</td>
																				</tr>
																			</tbody>
																		</table>
																	</div> -->
																	<br>
																	<div class="card">
																		<div class="row">
																			<div class="col-md-4">
																				<label for="first-name-horizontal">코트 이용 단위 시간</label>
																			</div>
																			<div class="col-md-8 form-group">
																				<input type="number" id="first-name-horizontal"
																					class="form-control" name="fname"
																					th:value="${courtDetail.useUnitTime}">
																			</div>
																			<div class="col-md-4">
																				<label for="first-name-horizontal">이용 가격</label>
																			</div>
																			<div class="col-md-8 form-group">
																				<input type="text" id="first-name-horizontal"
																					class="form-control" name="fname"
																					th:value="${courtDetail.crtUsePrice}">
																			</div>
																			<div class="col-md-4">
																				<label for="email-horizontal">실내외</label>
																			</div>
																			<div class="col-md-8 form-group">
																				<!-- <input type="text" id="email-horizontal" class="form-control"
														name="email-id" th:attr="value=${courtDetail.crtIndoorOutdoor == 1 ? '실내' : '실외'}"> -->
																				<input type="text" id="email-horizontal"
																					class="form-control" name="email-id"
																					th:value="${courtDetail.crtIndoorOutdoorName}">
																			</div>
																			<input type="hidden" id="crtDetailNo"
																				th:attrappend="id=${courtDetail.crtDetailNo}" class="form-control"
																				name="fname" th:value="${courtDetail.crtDetailNo}">
																			<div style="text-align: right;">
																				<button type="button"
																					th:onclick="|location.href='@{/hosteditCourtDetail(crtDetailNo=${courtDetail.crtDetailNo})}'|"
																					class="btn btn-primary me-1 mb-1"
																					style="width: 30%; display: inline-block;">[[${stat.index}+1]]코트
																					세부 수정하기</button>
																				<!-- <button type="button"
																					class="btn btn-primary me-1 mb-1 crtDetail"
																					id="crtDetailDelete" th:attrappend="id=${courtDetail.crtDetailNo}"
																					style="width: 30%; display: inline-block;">[[${stat.index}+1]]코트
																					세부 삭제하기</button> -->
																			</div>
																			<br><br><br><br><br>
																		</div>
																	</div>
																</div>
																<!-- <div class="col-md-6"
																style="margin-left: 50px; margin-bottom: 50px; margin-right: 150px; width: 50%; display: inline-block; float: left">
																	<h5>예약 현황</h5>
																	<input type="date"
																		class="form-control flatpickr-always-open"
																		placeholder="Select date..">
																	
																</div> -->
															</div>
														</div>
													</th:block>
													<!-- <div class="tab-pane fade" id="groceries-tab-pane" role="tabpanel"
								aria-labelledby="groceries-tab" tabindex="0">
								<div class="content__body" style="padding-top: 10px;">
									<div class="col-md-6"
										style="margin-left: 50px; margin-bottom: 50px; margin-right: 150px; width: 25.5%; display: inline-block; float: left">
										<h5>날짜 선택</h5>
										<input type="date" class="form-control flatpickr-always-open"
											placeholder="Select date..">
									</div>
									<div class="col-md-6"
										style="width: 75.5; display: inline-block; float: left">
										<h5>예약 시간 조회</h5>
										<div style="overflow: hidden">
											<table>
												<thead>
													<tr>
														<th th:each="num : ${#numbers.sequence(1,10)}"
															style="background-color: green; width: 50px; height: 30px; border: 3px solid #fff">
														</th>
														<th th:each="num1 : ${#numbers.sequence(1,6)}"
															style="background-color: lightgreen; width: 50px; height: 30px; border: 3px solid #fff">
														</th>
													</tr>
												</thead>
												<tbody>
													<tr>
														<td style="width: 50px; height: 30px; font-size: 10px">9시</td>
														<td th:each="num2 : ${#numbers.sequence(1,4)}"></td>
														<td style="width: 50px; height: 30px; font-size: 10px">14시</td>
														<td th:each="num2 : ${#numbers.sequence(1,4)}"></td>
														<td style="width: 50px; height: 30px; font-size: 10px">19시</td>
														<td th:each="num2 : ${#numbers.sequence(1,4)}"></td>
														<td style="width: 50px; height: 30px; font-size: 10px">24시</td>
													</tr>
												</tbody>
											</table>
											<table style="float: right">
												<tbody>
													<tr>
														<th
															style="background-color: green; width: 30px; height: 10px; border: 2px solid #fff">
														</th>
														<td style="width: 50px; height: 10px; font-size: 10px">예약불가</td>
														<th
															style="background-color: lightgreen; width: 30px; height: 10px; border: 2px solid #fff">
														</th>
														<td style="width: 50px; height: 10px; font-size: 10px">예약가능</td>
													</tr>
												</tbody>
											</table>
										</div>
										<br>
										<div class="card">
											<div class="row">
												<div class="col-md-4">
													<label for="first-name-horizontal">코트 이용 단위 시간</label>
												</div>
												<div class="col-md-8 form-group">
													<input type="number" id="first-name-horizontal"
														class="form-control" name="fname">
												</div>
												<div class="col-md-4">
													<label for="first-name-horizontal">이용 가격</label>
												</div>
												<div class="col-md-8 form-group">
													<input type="text" id="first-name-horizontal"
														class="form-control" name="fname">
												</div>
												<div class="col-md-4">
													<label for="email-horizontal">실내외</label>
												</div>
												<div class="col-md-8 form-group">
													<input type="text" id="email-horizontal" class="form-control"
														name="email-id">
												</div>
											</div>
										</div>
									</div>
								</div>
							</div> -->
													<!-- 후기 -->
													<div class="tab-pane fade" id="women-tab-pane"
														role="tabpanel" aria-labelledby="women-tab" tabindex="0">
														<div class="client__review"
															style="padding: 10px; margin-bottom: 50px;">
															<div class="table-responsive">
																<table class="table" id="table1">
																	<thead>
																		<tr>
																			<th>후기 번호</th>
																			<th>이미지</th>
																			<th>별점</th>
																			<th>후기 내용</th>
																			<th>작성자</th>
																			<th>작성일자</th>
																		</tr>
																	</thead>
																	<tbody>
																		<th:block th:each="review : ${review}">
																			<tr>
																				<td>[[ ${review.reviewNo} ]]</td>
																				<td>
																				<th:block th:if="${review.attachPath != null}">
																					<img th:src="${review.attachPath}" alt="avatar" style="width: 150px; height: 100px; over-fit:cover"/>
																				</th:block>
																				<th:block th:unless="${review.attachPath != null}">
																					<img src="/assets/img/default img.jpg" alt="avatar" style="width: 150px; height: 100px; over-fit:cover"/>
																				</th:block>
																				</td>
																				<td>[[ ${review.reviewStar} ]]</td>
																				<td>[[ ${review.reviewCtt} ]]</td>
																				<td>[[ ${review.memId} ]]</td>
																				<td>[[ ${#dates.format(review.reviewWriteDate, 'yyyy-MM-dd')} ]]</td>
																			</tr>
																		</th:block>
																	</tbody>
																</table>
															</div>
															<!-- <div class="outline"
																style="margin: 30px 0 30px 0; overflow: hidden;">
																<h3 class="sec__title" style="margin: 0; float: left">Comments
																	(2)</h3>
															</div> -->
															<!-- <div class="review__wrapper">
																<div class="review__item">
																	<div class="avatar">
																		<img src="assets/img/shop/teni.jpg" alt="avatar" />
																	</div>
																	<div class="review__content">
																		<div class="review__desc">
																			<div class="review__wrap">
																				<h5>
																					<a href="#">Hena Sinha</a>
																				</h5>
																				<div class="rating">
																					<ul>
																						<li><i class="fa-solid fa-star"></i></li>
																						<li><i class="fa-solid fa-star"></i></li>
																						<li><i class="fa-solid fa-star"></i></li>
																						<li><i class="fa-solid fa-star"></i></li>
																						<li><i class="fa-regular fa-star"></i></li>
																					</ul>
																				</div>
																			</div>
																			<div class="date">18 Jun 2022</div>
																		</div>
																		<div class="review__para">
																			<p>There are many variations of passages of Lorem
																				Ipsum available, but the majority have thank you
																				suffered alteration in some form, by injected humour,
																				or randomised words which don't look.</p>
																		</div>
																	</div>
																</div>
																<div class="review__item">
																	<div class="avatar">
																		<img src="assets/img/shop/teni.jpg" alt="avatar" />
																	</div>
																	<div class="review__content">
																		<div class="review__desc">
																			<div class="review__wrap">
																				<h5>
																					<a href="#">Brenna Das</a>
																				</h5>
																				<div class="rating">
																					<ul>
																						<li><i class="fa-solid fa-star"></i></li>
																						<li><i class="fa-solid fa-star"></i></li>
																						<li><i class="fa-solid fa-star"></i></li>
																						<li><i class="fa-solid fa-star"></i></li>
																						<li><i class="fa-regular fa-star"></i></li>
																					</ul>
																				</div>
																			</div>
																			<div class="date">18 Jun 2022</div>
																		</div>
																		<div class="review__para">
																			<p>There are many variations of passages of Lorem
																				Ipsum available, but the majority have thank you
																				suffered alteration in some form, by injected humour,
																				or randomised words which don't look.</p>
																		</div>
																	</div>
																</div>
															</div> -->
														</div>
													</div>
													<div class="tab-pane fade firstload" id="electronics-tab-pane"
														role="tabpanel" aria-labelledby="electronics-tab"
														tabindex="0">
														<br>
															<div style="display: flex; justify-content: center;">
																<div id='calendar' style="width: 70%; height: 100%"></div>
															</div>
														<br><br>
													</div>
												</div>
											</div>
										</div>
										<div style="text-align: center;">
											<button type="button"
												th:onclick="|location.href='@{/hostregisterCourtDetail(crtroomNo=${param.crtroomNo})}'|"
												class="btn btn-primary me-1 mb-1">코트장 내의 코트 추가하기</button>
											<button type="button"
												th:onclick="|location.href='@{/hostCourtList}'|"
												class="btn btn-primary me-1 mb-1">목록보기</button>
										</div>
									</div>
		
								</div>
							</div>
						</section>
					</div>
				</div>
			</div>
		</div>
		<!-- Basic Tables end -->
	</div>


	<script th:inline="javascript">
	$('.crtDetail').on('click',function(e){
		
		Swal.fire({
			  title: "",
			  text: "정말 삭제하시겠습니까?",
			  icon: "warning",
			  showCancelButton: true,
			  confirmButtonColor: "#3085d6",
			  cancelButtonColor: "#d33",
			  confirmButtonText: "Yes, delete it!"
			}).then((result) => {
			  if (result.isConfirmed) {
				console.log($('input[type=hidden]').prop("id").replace("crtDetailNo",""))
				let cnt = $(e.target).prop("id").replace("crtDetailDelete","");
				console.log(cnt);
				let crtDetailNo = Number($('#crtDetailNo'+cnt).val());
				$.ajax({
					type: 'POST',
					url: 'hostdeleteCourtDetail',
					data: {crtDeNo: crtDetailNo},
					dataType: 'json',
					success: function(result){
						if(result){
							Swal.fire({
								  icon: "success",
								  title: "",
								  text: "정상적으로 삭제되었습니다.",
								}).then(function(){
									location.reload();
								})
						}else{
							Swal.fire({
								  icon: "error",
								  title: "",
								  text: "정상적으로 삭제되지 않았습니다. \n정보를 확인해주시기바랍니다.",
								})
						}
					}
				})
	  		}
		});
	})
	/* let msg = [[${result}]]
	if(msg != null) {
		Swal.fire({
			  icon: "error",
			  title: "",
			  text: msg,
			}).then(function(){
				//location.href = window.location.href;
			})
	}
} */
</script>
	<script>
	$(function(){
		$('.nav-link').eq(0).addClass('active');
		$('.firstload').eq(0).addClass('show active');
		console.log('window');
	})
</script>
<script>
document.addEventListener('DOMContentLoaded', function() {
		var allEvents = [];
			let crtroomNo = `[[${param.crtroomNo}]]`;
			$.ajax({
				type: 'get',
				url: 'hostReserve',
				data: {crtroomNo},
				success: function(result){
					console.log(result);
					result.forEach(event => {
						allEvents.push({
							title : event.crtroomName,
							start : event.reserveDate,
							groupId : event.reserveStateName,
							writer : event.memId,
							content : event.reserveTimeName,
							id : event.reservePrice,
							allDay: true
						})
					})
					callFull();
				},
				error: function(err){
					console.log(err);
				}
			})
		

		//fullcalendar 기능 호출
		function callFull() {

			var calendarEl = document.getElementById('calendar');
			var calendar = new FullCalendar.Calendar(calendarEl, {
				headerToolbar : {
					left : 'prev,next today',
					center : 'title',
					right : 'dayGridMonth,timeGridWeek,timeGridDay'
				},
				initialDate : new Date(),
				navLinks : true, // can click day/week names to navigate views
				selectable : false,
				selectMirror : true,
				eventClick : function(arg) {
					console.log(arg);
					Swal.fire({
						title: "예약 정보",
						html: "<br><div><strong>코트장 이름:&nbsp;&nbsp;&nbsp;</strong>"+arg.event.title+"</div><br>"
							+"<div><strong>예약날짜:&nbsp;&nbsp;&nbsp;</strong>"+dateToFormat(arg.event.start)+"</div><br>"
							+"<div><strong>예약시간:&nbsp;&nbsp;&nbsp;</strong>"+arg.event.extendedProps.content+"</div><br>"
							+"<div><strong>예약자:&nbsp;&nbsp;&nbsp;</strong>"+arg.event.extendedProps.writer+"</div><br>"
							+"<div><strong>예약금액:&nbsp;&nbsp;&nbsp;</strong>"+arg.event.id+" 원</div><br>"
							+"<div><strong>예약상태:&nbsp;&nbsp;&nbsp;</strong>"+arg.event.groupId+"</div>",
	      	            showCancelButton: false,
	      	            confirmButtonColor: 'orange',
	      	            cancelButtonColor: '#d33',
	      	            confirmButtonText: 'OK'
					})
					},
					eventBorderColor: '#343a40',
					eventBackgroundColor : '#343a40',
					editable : true,
					dayMaxEvents : true, // allow "more" link when too many events
					events : allEvents
				})
				calendar.render();
			}
		});

		function dateToFormat(date) {
		    var year = date.getFullYear();
	
		    var month = date.getMonth() + 1;
		    if (month < 10)  {
		        month = '0' + month;
		    }
	
		    var date = date.getDate();
		    if (date < 10) {
		        date = '0' + date;
		    }
		    
		    return year + '/' + month + '/' + date;
		}
		
		//
		function dateToMonth(date){
			var month = date.getMonth() + 1;
			return month;
		}
		
		//이전,다음 달 값 가져오기
		$('button.fc-prev-button').click(function(){
			var date = $('#calendar').fullCalendar('getDate');
			date = convertDate(date);
			var MonthEvents = [];
			console.log(date);
			if(allEvents.start == dateToMonth(date)){
				MonthEvents.push(date);
			}
			var count = MonthEvents.length;
			$('#MonthCount').innerText = count;
		})
		$('button.fc-next-button').click(function(){
			var date = $('#calendar').fullCalendar('getDate');
			convertDate(date);
		})
		
</script>
</th:block>

</html>